name: Diff-Report

on: 
  pull_request:
  issue_comment:
    types: [created]

jobs:
  make_report:
    env:
      pr_body: ${{ github.event.pull_request.body }}
    runs-on: ubuntu-latest

    steps:
     - name: Parse PR body
       run: |
        echo "${{env.pr_body}}" > text
        grep "^Diff Regression projects:" text > temp
        sed 's/Diff Regression projects: //' temp > proj
        grep "^Diff Regression config:" text > temp
        sed 's/Diff Regression config: //' temp > config
        cat proj
        cat config
        
     - name: Download files 
       run: |
        wget -q -i proj -O proj.pro
        wget -q -i config -O config.xml
        ls -la
        
     - name: Create a message
       run: |
        sed -n 1,2p proj.pro > message
        sed -n 1,2p config.xml > temp
        cat temp >> message
        cat message
        ${{env.pr_body = message}}
        echo ${{env.pr_body}}
#    - name: Checkout
#      uses: actions/checkout@v1
      
#     - name: Comment PR
#       uses:  kate2513/javascript-test-action@master 
#       with:
#        message: 'Example of message!'
#        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
